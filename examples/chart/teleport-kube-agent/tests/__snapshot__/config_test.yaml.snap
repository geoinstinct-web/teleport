does not generate a config for clusterrole.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
does not generate a config for pdb.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot and tests for annotations.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      annotations:
        kubernetes.io/config: test-annotation
        kubernetes.io/config-different: 2
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot and tests for extra-labels.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      labels:
        app.kubernetes.io/name: teleport-kube-agent
        resource: config
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for affinity.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for all-v6.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          apps:
          - labels:
              environment: test
            name: grafana
            uri: http://localhost:3000
          enabled: true
          resources: null
        auth_service:
          enabled: false
        db_service:
          databases:
          - labels:
              database: staging
            name: aurora
            protocol: postgres
            uri: postgres-aurora-instance-1.xxx.us-east-1.rds.amazonaws.com:5432
          enabled: true
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
          labels:
            cluster: testing
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      annotations:
        kubernetes.io/config: test-annotation
        kubernetes.io/config-different: 2
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for aws-databases.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          aws:
          - regions:
            - us-east-1
            tags:
              '*': '*'
            types:
            - rds
          - regions:
            - us-west-2
            tags:
              env: development
            types:
            - rds
          enabled: true
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for azure-databases.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          azure:
          - tags:
              '*': '*'
            types:
            - mysql
            - postgres
          - regions:
            - eastus
            - centralus
            resource_groups:
            - group1
            - group2
            subscriptions:
            - subID1
            - subID2
            tags:
              env:
              - dev
              - staging
              origin: alice
            types:
            - mysql
          enabled: true
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for backwards-compatibility.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for ca-pin.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          ca_pin:
          - sha256:7e12c17c20d9cb504bbcb3f0236be3f446861f1396dcbb44425fe28ec1c108f1
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for db.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          databases:
          - labels:
              database: staging
            name: aurora
            protocol: postgres
            uri: postgres-aurora-instance-1.xxx.us-east-1.rds.amazonaws.com:5432
          enabled: true
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for dynamic-app.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: true
          resources:
          - labels:
              '*': '*'
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for dynamic-db.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: true
          resources:
          - labels:
              '*': '*'
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for imagepullsecrets.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for initcontainers.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for join-params-iam.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: iam
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for join-params-token.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for log-basic.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: json
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for log-extra.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - level
              - timestamp
              - component
              - caller
              output: json
            output: /var/lib/teleport/test.log
            severity: DEBUG
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for log-legacy.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: DEBUG
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for node-selector.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for pdb.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - level
              - timestamp
              - component
              - caller
              output: json
            output: /var/lib/teleport/test.log
            severity: DEBUG
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for resources.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for stateful.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for tolerations.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for v10.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          auth_servers:
          - proxy.example.com:3080
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for v11.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster-name
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for volumes.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for windows-ad.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          discovery:
            base_dn: '*'
          enabled: true
          labels:
            teleport.internal/resource-id: 5840df37-4cc3-49f1-ade0-ec9232575dbf
          ldap:
            addr: 172.0.0.1:636
            domain: asteroid.example.com
            insecure_skip_verify: false
            ldap_ca_cert: |
              -----BEGIN CERTIFICATE-----
              MIIDszCCApugAwIBAgIQK9/a6A9HNbFDkyqMrJFZ8TANBgkqhkiG9w0BAQwFADBs
              MRMwEQYKCZImiZPyLGQBGRYDY29tMRcwFQYKCZImiZPyLGQBGRYHZXhhbXBsZTEX
              MBUGCgmSJomT8ixkARkWB2FzdHJvaWQxIzAhBgNVBAMTGmFzdHJvaWQtRUMyQU1B
              Wi1VTE0zUTNTLUNBMB4XDTIzMDgyNjAxNDQyMloXDTI4MDgyNjAxNTQyMFowbDET
              MBEGCgmSJomT8ixkARkWA2NvbTEXMBUGCgmSJomT8ixkARkWB2V4YW1wbGUxFzAV
              BgoJkiaJk/IsZAEZFgdhc3Ryb2lkMSMwIQYDVQQDExphc3Ryb2lkLUVDMkFNQVot
              VUxNM1EzUy1DQTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAObKiE6G
              8K2RiIZUZOAZ0lP4fFx619pdhfdXtJ+JuFqPKmuWRgOoLMNudyeW3X35rZqkyI74
              TifjCe/Y0KkO1ix6sQQp3JXR0J+3cjF5IP+WXNqRBfrHvOMjadFboA8wgE8l9Fq0
              a4FdSCNkBNmftRO4vqvgtvdhsaLyexjjsyKTuYtvKwLcW8CQHCU6zGsx94ZaOswR
              nxB3VFY5kihkAnGu/pFh7oYaxmxrGQgtvnhD7PqsTnhRWQZRLyQCRpzjHikBLD5X
              1qBa9tJgEhOyQOBkCNJ6zwB4t7hyWcKf7cKb/pG3A8RxMJ66yWeywKAHMbRr9xUp
              iYClbN6ztvrD100CAwEAAaNRME8wCwYDVR0PBAQDAgGGMA8GA1UdEwEB/wQFMAMB
              Af8wHQYDVR0OBBYEFFGrFo9TdGzbvMbUxpqMUhA/H4tgMBAGCSsGAQQBgjcVAQQD
              AgEAMA0GCSqGSIb3DQEBDAUAA4IBAQBAhAKftgv7XHJEIXUQWp9HRA950znxHNGZ
              E7vNMccwwap1q5yds86xny+qrbkMseTaJLJxxQHMB6/7Xkmtjc+Ltsw/8VCOzHWA
              5nNF++tyllTLWBzypR3Ax68V3GYwnVbRIwOGiHrb1Y5MPzKsJF9h02U9ZehP2mwB
              o1tHYEmHbofA/plVRr+lBkY1lK0plmhfyqF4AuJzjhAMvwdkpZg/RGG6LjOEGeCX
              cuXopj9f2j+oYPAz798A1rZAm9Kz4b5uI46ultSVhU9WmM+nyjPU/J803J7sgy/m
              jwMCMyy8p33w+Y11a0av4eD/V0KMQdS90uxsUD5t1NTr2Fn5rEbg
              -----END CERTIFICATE-----
            server_name: EC2AMAZ-ULM3Q3S.asteroid.example.com
            sid: S-1-5-21-1717630186-822870621-3846248122-1103
            username: ASTEROID\svc-teleport
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot for windows-nonad.yaml:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: false
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          enabled: false
        kubernetes_service:
          enabled: false
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: true
          non_ad_hosts:
          - windowsserver
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
matches snapshot when app discovery is enabled:
  1: |
    apiVersion: v1
    data:
      teleport.yaml: |-
        app_service:
          enabled: true
          resources:
          - labels:
              teleport.dev/kubernetes-cluster: test-kube-cluster
              teleport.dev/origin: discovery-kubernetes
        auth_service:
          enabled: false
        db_service:
          enabled: false
        discovery_service:
          discovery_group: test-kube-cluster
          enabled: true
          kubernetes:
          - labels:
              '*': '*'
            namespaces:
            - '*'
            types:
            - app
        kubernetes_service:
          enabled: true
          kube_cluster_name: test-kube-cluster
        proxy_service:
          enabled: false
        ssh_service:
          enabled: false
        teleport:
          join_params:
            method: token
            token_name: /etc/teleport-secrets/auth-token
          log:
            format:
              extra_fields:
              - timestamp
              - level
              - component
              - caller
              output: text
            output: stderr
            severity: INFO
          proxy_server: proxy.example.com:3080
        version: v3
        windows_desktop_service:
          enabled: false
    kind: ConfigMap
    metadata:
      name: RELEASE-NAME
      namespace: NAMESPACE
