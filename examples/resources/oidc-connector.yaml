#
# Example resource for an OIDC connector
# We recommend using oidc for G Suite, Auth 0 and Keyclock
#
kind: oidc
version: v2
metadata:
  name: "oidc_connector"
spec:
  # name of the OIDC provider, like "keycloak".
  provider: example

  # This value will be used in the Web UI for "[login with example]" button
  # button on the cluster login screen so it will say "Login with Google". 
  # Teleport will provide custom CSS for 'Google' and 'Auth0'. 
  display: "Login with Example"

  # these values must come from the OIDC provider configuration
  client_id: <client id>
  client_secret: <client secret>
  issuer_url: https://oidc.example.com

  # the redirect URL must be accessible by all users 
  redirect_url: https://<cluster-url>.example.com:3080/v1/webapi/oidc/callback
  redirect_timeout: 90s

  # acr_values are optional (for OIDC providers that require them).
  # acr_values: foo

  # this section tells Teleport to evaluate claim "group" and:
  #  - if the claim value is "admin", give a user "admin" role
  #  - if the claim value is "user", give a user "user" role
  scope: ["group"]
  claims_to_roles:
    - claim: "group"
      value: "admin"
      roles: ["admin"]
    - claim: "group"
      value: "user"
      roles: ["user"]
