---
title: Deploying Machine ID on Linux
description: How to install and configure Machine ID on a Linux host
---

This page contains relevant background information and specific steps for
deploying Machine ID on a Linux host.

## Background

### The `token` join method

TODO: Brief overview of how the join method works for this platform.

### Daemon vs Oneshot

(!docs/pages/includes/machine-id/daemon-v-oneshot.mdx!)

## Guide

This guide will...

### Prerequisites

(!docs/pages/includes/edition-prereqs-tabs.mdx!)

- (!docs/pages/includes/tctl.mdx!)
- A Linux host that you wish to install Machine ID onto.

### Step 1/4. Install `tbot`

Download the appropriate Teleport package for your platform:

(!docs/pages/includes/install-linux.mdx!)

### Step 2/4. Create a role and bot user

(!docs/pages/includes/machine-id/blank-role.mdx!)

Create the bot, specifying the role that you have created:

```code
$ tctl bots add example --roles example-bot
```

### Step 3/4. Configure `tbot`

Create the bot data directory and grant permissions to access it to the Linux
user (in our example, `teleport`) which `tbot` will run as.

```code
# Make the bot directory and assign ownership to teleport user
$ sudo mkdir -p /var/lib/teleport/bot
$ sudo chown teleport:teleport /var/lib/teleport/bot
# Allow teleport user to open directory
$ sudo chmod +x /var/lib/teleport /var/lib/teleport/bot
```


Create `/etc/tbot.yaml`:

```yaml
version: v2
# ensure this is configured to the address of your Teleport Proxy or
# Auth Server. Prefer the address of the Teleport Proxy.
auth_server: example.teleport.sh:443
onboarding:
  join_method: token
  token: /path/to/token
storage:
  type: directory
  path: /var/lib/teleport/bot
outputs: []
```

#### Create a service

To run `tbot` as a daemon, a service manager should be configured to supervise
this process. The service manager will be responsible for starting `tbot` on
boot and restarting it if it exits with an error. This step assumes you are
using systemd, however, other service managers can be used.


Create `/etc/systemd/system/tbot.service`:
```code
[Unit]
Description=Teleport Machine ID Service
After=network.target

[Service]
Type=simple
User=teleport
Group=teleport
Restart=on-failure
ExecStart=/usr/local/bin/tbot start -c /etc/tbot.yaml
ExecReload=/bin/kill -HUP $MAINPID
PIDFile=/run/tbot.pid
LimitNOFILE=524288

[Install]
WantedBy=multi-user.target
```

Enable the service so that it starts on boot and then start the service:

```code
$ sudo systemctl daemon-reload
$ sudo systemctl enable tbot
$ sudo systemctl start tbot
```

Check the service has started successfully:

```code
$ sudo systemctl status tbot
```

### Step 4/4. Configure Outputs

Follow one of the [access guides](../access-guides.mdx) to configure an output
that meets your access needs.

## Next steps

- Follow the [access guides](../access-guides.mdx) to finish configuring `tbot` for
  your environment.
- Read the [configuration reference](../reference/configuration.mdx) to explore
  all the available configuration options.