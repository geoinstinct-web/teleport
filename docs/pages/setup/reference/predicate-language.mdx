---
title: Predicate Language
description: How to use predicate language used to define filter conditions.
h1: Predicate Language
---

Predicate language is used to define filter or where condition for select resources.
It is also used as a query language to filter and search through a [list of select resources](#resource-filtering).

The predicate language support slightly differs depending on where it is used as explained in the next sections.

## Defining Filter or Where Conditions in Role Resources

Some fields in our role resources uses the predicate language:

- [Dynamic Impersonation](../../access-controls/guides/impersonation.mdx#dynamic-impersonation)
- [RBAC for sessions](../../access-controls/reference.mdx#rbac-for-sessions)

The language tailored for role resources supports the following operators:

| Operator | Meaning                                          | Example                                                          |
|----------|--------------------------------------------------|------------------------------------------------------------------|
| &&       | and (all conditions must match)                  | `contains(some.field1, "val1") && equals(some.field2, "val2")`   |
| \|\|     | or  (any one condition should match)             | `contains(some.field, "val1") \|\| contains(some.field, "val2")` |
| !        | not (used with functions, more about this below) | `!equals(some.field, "val")`                                     |

The language also supports the following functions:

| Functions                      | Description                                                           |
|--------------------------------|-----------------------------------------------------------------------|
| `contains(<field>, "<value>")` | checks if `<value>` is included in the list of strings from `<field>` |
| `equals(<field>, "<value>")`   | checks if `<value>` is equal to the value from `<field>`              |


## [Resource Filtering](#resource-filtering)

Both [`tsh`](cli.mdx#tsh) and [`tctl`](cli.mdx#tctl) CLI tools allow you to filter `Nodes`, 
`Applications`, `Databases`, and `Kubernetes` resources using the `--query` flag. The `--query` flag allows you to 
perform more sophisticated searches using the predicate language tailored for filtering resources.

For common resource fields, we defined shortened field names that can easily be accessed by:

| Short Field    | Actual Field Equivalent                                 | Example                 |
|----------------|---------------------------------------------------------|-------------------------|
| labels.\<key\> | resource.metadata.labels + resource.spec.dynamic_labels | labels.env == "staging" |
| name           | resource.metadata.name                                  | name = "jenkins"        |

The language supports the following operators:

| Operator | Meaning                              | Example                                             |
|----------|--------------------------------------|-----------------------------------------------------|
| ==       | equal to                             | `labels.env == "prod"` or `labels["env"] == "prod"` |
| !=       | not equal to                         | `labels.env != "prod"`                              |
| &&       | and (all conditions must match)      | `labels.env == "prod" && labels.os == "mac"`        |
| \|\|     | or  (any one condition should match) | `labels.env == "dev" \|\| labels.env == "qa"`       |
| !        | not (used with functions)            | `!equals(labels.env, "prod")`                       |

The language also supports the following functions:

| Functions (with examples)             | Description                                          |
|---------------------------------------|------------------------------------------------------|
| `equals(labels.env, "prod")`          | resources with label key `env` equal to `prod`       |
| `exists(labels.env)`                  | resources with a label key `env`; value unchecked    |
| `!exists(labels.env)`                 | resources without a label key `env`; value unchecked |
| `search("foo", "bar", "some phrase")` | fuzzy match against common resource fields           |

See some [examples](cli.mdx#filter-examples) of the different ways you can filter resources.
