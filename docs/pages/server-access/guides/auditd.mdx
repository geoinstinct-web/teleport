---
title: Configure SSH with the Linux Auditing System
description: How to configure Teleport SSH with auditd (Linux Auditing System).
h1: Linux Auditing System (auditd)
---

Teleport's SSH Service can be configured to integrate with Linux Auditing System (auditd).

## Prerequisites

(!docs/pages/includes/edition-prereqs-tabs.mdx!)

- A running Teleport Node. See the [Server Access Getting Started Guide](../getting-started.mdx) for  how to add a Node to your Teleport cluster.
- Linux kernel 2.6.6+ compiled with `CONFIG_AUDIT`. Most Linux distributions have this option enabled by default.
- `auditctl` to check auditd status (optional).

(!docs/pages/includes/tctl.mdx!)

## Step 1/3. Check system configuration.

Teleport automatically sends audit events when it discovers that auditd is enabled in the system.
You can verify that by calling `auditctl -s` as a root.

Here is an example output from that command:

```bash
$ sudo auditctl -s
enabled 1
failure 1
pid 879
rate_limit 0
backlog_limit 8192
lost 0
backlog 0
backlog_wait_time 60000
backlog_wait_time_actual 0
loginuid_immutable 0 unlocked
```
The first line `enabled 1` indicates that auditd is enabled, and Teleport will send events.

## Step 2/3. Start Teleport.

It's important to run Teleport as a system service (systemd service, for example) with root permissions.
Otherwise, Teleport won't send any events to auditd due to lack of permissions.

<Admonition type="warning">

  Make sure that the Teleport process has login UID unset. Otherwise, session ID won't be set correctly in the emitted events.
  You can verify that by calling `cat /proc/$(pidof teleport)/loginuid`. The value should be set to 4294967295.

</Admonition>

## Step 3/3. Enable PAM integration (optional).

Auditd can generate additional events when PAM (Pluggable Authentication Modules) is enabled. To enable PAM integration
in Teleport please refer to [PAM](./ssh-pam/#set-up-pam-on-a-linux-machine-running-teleport).
When PAM integration is enabled, audit events should closely match events generated by OpenSSH.

