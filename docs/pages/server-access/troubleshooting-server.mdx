---
title: Troubleshooting Server Access
description: Describes common issues and solutions for access to servers.
---

This section describes common issues that you might encounter in managing access to servers
with Teleport and how to work around or resolve them.

## Starting SSH sessions fails

By default, if you use SSH to connect to a server, Teleport runs as the user login that starts 
the SSH session. If starting the session fails, it might be due to the Teleport file permission
settings for the user login that Teleport is using to connect to the remote servr.
This issue might be caused by systems that prevent newly installed software from being executable 
by any user.  

## Symptom

This issue results in a disconnected session and an error message similar to the following:

```text
Failed to launch: fork/exec /proc/self/exe: permission denied.
Process exited with status 255
```

## Solution

You should check the permission settings for the `teleport` service. 

To check the permissions on the teleport service:

1. Open a terminal shell on the computer where you have installed the `teleport` service.

1. Determine the location of the Teleport binary by running the following command:
   
   ```code
   which teleport
   ```

1. Check the permission settings for the binary by running the following command:
   
   ```code
   ls -al <Var name="/usr/local/bin/teleport" />
   ```

   The command should return output similar to the following:
   
   ```text
   -rwxr-xr-x  1 root  wheel  531849504 Aug 30 18:32 /usr/local/bin/teleport
   ```
   
   If you don't see the permission that allows other users to read and execute (-rwxr-x**r-x**), 
   you should update the permissions. For example:

   ```code
   chmod o+rx teleport
   ```
   
1. Restart the `teleport` service.

## Missing logins for single sign-on users

If you use an external identity provider to enable single sign-on for users, you should be sure
to assign logins for those users.

### Symptom

Users who have access to Teleport through an authentication connector for an external identity
provider don't see any of the logins they need to access remote resources.

### Solution

To fix this issue, you can assign logins to your single sign-on users or modify the traits in 
the Teleport roles assigned to users through their group membership in the external identity provider.

## Listing available servers

In some cases,  running `tsh ls` or `tctl nodes ls` commands might include servers that are offline.
For example, a server that has stopped sending a heartbeat to the Teleport Proxy Service
might continue to be listed as available in the output of `tsh ls` or `tctl nodes ls` commands for
10 minutes or more.

## Symptom

An unresponsive server is listed as available in the output of `tsh ls` or `tctl nodes ls` commands.
For example, you might run either of these commands and see output similar to the following for
servers that have previously sent a heartbeat signal to the Teleport Proxy Service even if
one of these servers subsequently went offline:

```code
Node Name      Address        Labels                  
-------------- -------------- ----------------------- 
ip-172-3-1-242 127.0.0.1:3022 hostname=ip-172-3-1-242 
ip-172-3-1-75  ⟵ Tunnel       hostname=ip-172-3-1-75  
ip-172-3-2-177 ⟵ Tunnel       hostname=ip-172-3-2-177
```

## Solution

To investigate whether an unresponsive server is sending a heartbeat, you can run the 
`tsh ls` or `tctl nodes ls` command with the `--format json` command-line option to
see additional inormation, including an expiration time. For example

```json
    "kind": "node",
    "version": "v2",
    "metadata": {
      "name": "c78612d9-dab4-497f-a4d8-59ddb7edc6e9",
      "labels": {
        "teleport.internal/resource-id": "3547a530-3b58-4f65-8335-c5cf99c7b374"
      },
      "expires": "2023-09-15T21:40:17.653190645Z",
      "id": 1694813417653574518
    },
```

If the server is sending a regular heartbeat signal, the expires value should be
approximately eight to ten minutes from the current time. If time to expire is
less eight to ten minutes from the current time—for example, in the next two minutes—it's
likely that the server has stopped sending the heartbeat.

## Unable to join a shared session

Moderated sessions or remote shared sessions enable multiple users to observe, participate, or terminate
a session in real time. You can define rules and configure role-based policies to control which users can join other user's 
sessions from `tsh` and the Teleport Web UI. If you are unable to join a shared session, you should
check your role assignments and ensure you have a role that include the `join_session` permission.
For example:

```yaml
kind: role
metadata:
  name: auditor
version: v6
spec:
  allow:
    join_sessions:
      - name: Auditor oversight
        roles : ['prod-access']
        kinds: ['k8s', 'ssh']
        modes: ['moderator', 'observer']
```

For more information about moderated sessions and session sharing, see 
[Moderated Sessions](../access-controls/guides/moderated-sessions/).